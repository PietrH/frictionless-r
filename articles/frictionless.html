<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to frictionless • frictionless</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to frictionless">
<meta property="og:description" content="frictionless">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">frictionless</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/frictionless.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/frictionlessdata/frictionless-r/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="frictionless_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to frictionless</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/frictionlessdata/frictionless-r/blob/HEAD/vignettes/frictionless.Rmd" class="external-link"><code>vignettes/frictionless.Rmd</code></a></small>
      <div class="hidden name"><code>frictionless.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="what-is-a-data-package">What is a Data Package?<a class="anchor" aria-label="anchor" href="#what-is-a-data-package"></a>
</h2>
<p>A <a href="https://specs.frictionlessdata.io/data-package/" class="external-link">Data Package</a> is a simple container format to describe and package a collection of (tabular) data. It is typically used to publish FAIR and open datasets. In this tutorial we will show you how to read, create, edit and write Data Packages with the <strong>R pkg frictionless</strong>.</p>
<p><strong>package</strong> vs <strong>pkg</strong>: in the Frictionless Data community <code>package</code> refers to a Data Package, while in R that is a software package In this tutorial we will use <code>pkg</code> to refer to the latter.</p>
</div>
<div class="section level2">
<h2 id="read-a-data-package">Read a Data Package<a class="anchor" aria-label="anchor" href="#read-a-data-package"></a>
</h2>
<p>Load the frictionless pkg with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/frictionlessdata/frictionless-r" class="external-link">frictionless</a></span><span class="op">)</span></code></pre></div>
<p>To read a Data Package, you need to know the path or URL to its descriptor file, named <code>datapackage.json</code>. That file describes the Data Package, provides access points to its Data Resources and can contain dataset-level metadata. Let’s read a Data Package descriptor file published on <a href="https://doi.org/10.5281/zenodo.5070086" class="external-link">Zenodo</a>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">package</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_package.html">read_package</a></span><span class="op">(</span><span class="st">"https://zenodo.org/record/5070086/files/datapackage.json"</span><span class="op">)</span>
<span class="co">#&gt; Please make sure you have the right to access data from this Data Package for your intended use.</span>
<span class="co">#&gt; Follow applicable norms or requirements to credit the dataset and its authors.</span>
<span class="co">#&gt; For more information, see https://doi.org/10.5281/zenodo.5070086</span></code></pre></div>
<p><code><a href="../reference/read_package.html">read_package()</a></code> returns the content of <code>datapackage.json</code> as a list object. You can access any of its properties, including the names of the Data Resources. <strong>Data Resources</strong> contain the data of a Data Package.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">package</span><span class="op">$</span><span class="va">resource_names</span>
<span class="co">#&gt; [1] "reference-data" "gps"            "acceleration"</span></code></pre></div>
<p>This Data Package has 3 resources. Let’s read the data from the <code>gps</code> resource into a data frame:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gps</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_resource.html">read_resource</a></span><span class="op">(</span><span class="va">package</span>, <span class="st">"gps"</span><span class="op">)</span>
<span class="va">gps</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 73,047 × 21</span></span>
<span class="co">#&gt;     `event-id` visible timestamp           `location-long` `location-lat`</span>
<span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> <span style="text-decoration: underline;">14</span>256<span style="text-decoration: underline;">075</span>762 TRUE    2018-05-25 <span style="color: #949494;">16:11:37</span>            4.25           51.3</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> <span style="text-decoration: underline;">14</span>256<span style="text-decoration: underline;">075</span>763 TRUE    2018-05-25 <span style="color: #949494;">16:16:41</span>            4.25           51.3</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> <span style="text-decoration: underline;">14</span>256<span style="text-decoration: underline;">075</span>764 TRUE    2018-05-25 <span style="color: #949494;">16:21:29</span>            4.25           51.3</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> <span style="text-decoration: underline;">14</span>256<span style="text-decoration: underline;">075</span>765 TRUE    2018-05-25 <span style="color: #949494;">16:26:28</span>            4.25           51.3</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> <span style="text-decoration: underline;">14</span>256<span style="text-decoration: underline;">075</span>766 TRUE    2018-05-25 <span style="color: #949494;">16:31:21</span>            4.25           51.3</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> <span style="text-decoration: underline;">14</span>256<span style="text-decoration: underline;">075</span>767 TRUE    2018-05-25 <span style="color: #949494;">16:36:09</span>            4.25           51.3</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> <span style="text-decoration: underline;">14</span>256<span style="text-decoration: underline;">075</span>768 TRUE    2018-05-25 <span style="color: #949494;">16:40:57</span>            4.25           51.3</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> <span style="text-decoration: underline;">14</span>256<span style="text-decoration: underline;">075</span>769 TRUE    2018-05-25 <span style="color: #949494;">16:45:55</span>            4.25           51.3</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> <span style="text-decoration: underline;">14</span>256<span style="text-decoration: underline;">075</span>770 TRUE    2018-05-25 <span style="color: #949494;">16:50:49</span>            4.25           51.3</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> <span style="text-decoration: underline;">14</span>256<span style="text-decoration: underline;">075</span>771 TRUE    2018-05-25 <span style="color: #949494;">16:55:36</span>            4.25           51.3</span>
<span class="co">#&gt; <span style="color: #949494;"># … with 73,037 more rows, and 16 more variables:</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   bar:barometric-pressure &lt;dbl&gt;, external-temperature &lt;dbl&gt;, gps:dop &lt;dbl&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   gps:satellite-count &lt;dbl&gt;, gps-time-to-fix &lt;dbl&gt;, ground-speed &lt;dbl&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   heading &lt;dbl&gt;, height-above-msl &lt;dbl&gt;, location-error-numerical &lt;dbl&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   manually-marked-outlier &lt;lgl&gt;, vertical-error-numerical &lt;dbl&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   sensor-type &lt;chr&gt;, individual-taxon-canonical-name &lt;chr&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   tag-local-identifier &lt;chr&gt;, individual-local-identifier &lt;chr&gt;, …</span></span></code></pre></div>
<p>The data frame contains all GPS records, even though the actual data were split over <a href="https://zenodo.org/record/5070086#files" class="external-link">multiple CSV files</a>. <code><a href="../reference/read_resource.html">read_resource()</a></code> assigned the column names and types based on the Table Schema that was defined for that resource, not the headers of the CSV file.</p>
<p>You can also read data from a local (e.g. downloaded) Data Package. In fact, there is one included in the frictionless pkg, let’s read that one from disk:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">local_package</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_package.html">read_package</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"datapackage.json"</span>, package <span class="op">=</span> <span class="st">"frictionless"</span><span class="op">)</span>
<span class="op">)</span>
<span class="co">#&gt; Please make sure you have the right to access data from this Data Package for your intended use.</span>
<span class="co">#&gt; Follow applicable norms or requirements to credit the dataset and its authors.</span>
<span class="fu"><a href="../reference/read_resource.html">read_resource</a></span><span class="op">(</span><span class="va">local_package</span>, <span class="st">"media"</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 5</span></span>
<span class="co">#&gt;   media_id       deployment_id observation_id timestamp    file_path            </span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> aed5fa71-3ed4… 1             1-1            2020-09-28 … https://multimedia.a…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> da81a501-8236… 1             1-1            2020-09-28 … https://multimedia.a…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 0ba57608-3cf1… 1             1-1            2020-09-28 … https://multimedia.a…</span></code></pre></div>
<p>Data from the <code>media</code> was not stored in a CSV file, but directly in the <code>data</code> property of that resource in <code>datapackage.json</code>. <code><a href="../reference/read_resource.html">read_resource()</a></code> will automatically detect where to read data from.</p>
</div>
<div class="section level2">
<h2 id="create-and-edit-a-data-package">Create and edit a Data Package<a class="anchor" aria-label="anchor" href="#create-and-edit-a-data-package"></a>
</h2>
<p>Data Package is a good format to technically describe your data, e.g. if you are planning to deposit it on research repository. It also goes a long way meeting <a href="https://www.go-fair.org/fair-principles/" class="external-link">FAIR principles</a>.</p>
<p>The frictionless pkg assumes your data are stored as a data frame. Let’s use the built-in dataset <code>iris</code> as your data frame:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Show content of the data frame "iris"</span>
<span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 150 × 5</span></span>
<span class="co">#&gt;    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span>
<span class="co">#&gt;           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>          5.1         3.5          1.4         0.2 setosa </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>          4.9         3            1.4         0.2 setosa </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>          4.7         3.2          1.3         0.2 setosa </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>          4.6         3.1          1.5         0.2 setosa </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>          5           3.6          1.4         0.2 setosa </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>          5.4         3.9          1.7         0.4 setosa </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>          4.6         3.4          1.4         0.3 setosa </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>          5           3.4          1.5         0.2 setosa </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>          4.4         2.9          1.4         0.2 setosa </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span>          4.9         3.1          1.5         0.1 setosa </span>
<span class="co">#&gt; <span style="color: #949494;"># … with 140 more rows</span></span></code></pre></div>
<p>Create a Data Package with <code><a href="../reference/create_package.html">create_package()</a></code> and add your data frame as a resource with the name <code>iris</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_package</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="../reference/create_package.html">create_package</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_resource.html">add_resource</a></span><span class="op">(</span>resource_name <span class="op">=</span> <span class="st">"iris"</span>, df <span class="op">=</span> <span class="va">iris</span><span class="op">)</span></code></pre></div>
<p>Note that you can chain most frictionless functions together using pipes (<code>%&gt;%</code> or <code>|&gt;</code>), which improves readability.</p>
<p><code>my_package</code> now contains one resource:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_package</span><span class="op">$</span><span class="va">resource_names</span>
<span class="co">#&gt; [1] "iris"</span></code></pre></div>
<p>By default, <code><a href="../reference/add_resource.html">add_resource()</a></code> will create a <strong>Table Schema</strong> for your data frame, describing its field names, field types and (for factors) constraints. You can retrieve the schema of a resource with <code><a href="../reference/get_schema.html">get_schema()</a></code>. It is a list object, which we print here using <code><a href="https://rdrr.io/r/utils/str.html" class="external-link">str()</a></code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">iris_schema</span> <span class="op">&lt;-</span>
  <span class="va">my_package</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/get_schema.html">get_schema</a></span><span class="op">(</span><span class="st">"iris"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">iris_schema</span><span class="op">)</span>
<span class="co">#&gt; List of 1</span>
<span class="co">#&gt;  $ fields:List of 5</span>
<span class="co">#&gt;   ..$ :List of 2</span>
<span class="co">#&gt;   .. ..$ name: chr "Sepal.Length"</span>
<span class="co">#&gt;   .. ..$ type: chr "number"</span>
<span class="co">#&gt;   ..$ :List of 2</span>
<span class="co">#&gt;   .. ..$ name: chr "Sepal.Width"</span>
<span class="co">#&gt;   .. ..$ type: chr "number"</span>
<span class="co">#&gt;   ..$ :List of 2</span>
<span class="co">#&gt;   .. ..$ name: chr "Petal.Length"</span>
<span class="co">#&gt;   .. ..$ type: chr "number"</span>
<span class="co">#&gt;   ..$ :List of 2</span>
<span class="co">#&gt;   .. ..$ name: chr "Petal.Width"</span>
<span class="co">#&gt;   .. ..$ type: chr "number"</span>
<span class="co">#&gt;   ..$ :List of 3</span>
<span class="co">#&gt;   .. ..$ name       : chr "Species"</span>
<span class="co">#&gt;   .. ..$ type       : chr "string"</span>
<span class="co">#&gt;   .. ..$ constraints:List of 1</span>
<span class="co">#&gt;   .. .. ..$ enum: chr [1:3] "setosa" "versicolor" "virginica"</span></code></pre></div>
<p>You can also create a schema from a data frame, using <code><a href="../reference/create_schema.html">create_schema()</a></code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">iris_schema</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_schema.html">create_schema</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">iris_schema</span><span class="op">)</span>
<span class="co">#&gt; List of 1</span>
<span class="co">#&gt;  $ fields:List of 5</span>
<span class="co">#&gt;   ..$ :List of 2</span>
<span class="co">#&gt;   .. ..$ name: chr "Sepal.Length"</span>
<span class="co">#&gt;   .. ..$ type: chr "number"</span>
<span class="co">#&gt;   ..$ :List of 2</span>
<span class="co">#&gt;   .. ..$ name: chr "Sepal.Width"</span>
<span class="co">#&gt;   .. ..$ type: chr "number"</span>
<span class="co">#&gt;   ..$ :List of 2</span>
<span class="co">#&gt;   .. ..$ name: chr "Petal.Length"</span>
<span class="co">#&gt;   .. ..$ type: chr "number"</span>
<span class="co">#&gt;   ..$ :List of 2</span>
<span class="co">#&gt;   .. ..$ name: chr "Petal.Width"</span>
<span class="co">#&gt;   .. ..$ type: chr "number"</span>
<span class="co">#&gt;   ..$ :List of 3</span>
<span class="co">#&gt;   .. ..$ name       : chr "Species"</span>
<span class="co">#&gt;   .. ..$ type       : chr "string"</span>
<span class="co">#&gt;   .. ..$ constraints:List of 1</span>
<span class="co">#&gt;   .. .. ..$ enum: chr [1:3] "setosa" "versicolor" "virginica"</span></code></pre></div>
<p>Doing so allows you to customize the schema before adding the resource. E.g. let’s add a description for <code>Sepal.Length</code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">iris_schema</span><span class="op">$</span><span class="va">fields</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">description</span> <span class="op">&lt;-</span> <span class="st">"Sepal length in cm."</span>
<span class="co"># Show result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">iris_schema</span><span class="op">$</span><span class="va">fields</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
<span class="co">#&gt; List of 3</span>
<span class="co">#&gt;  $ name       : chr "Sepal.Length"</span>
<span class="co">#&gt;  $ type       : chr "number"</span>
<span class="co">#&gt;  $ description: chr "Sepal length in cm."</span></code></pre></div>
<p>Since schema is a list, you can use the <code>purrr</code> pkg to edit multiple elements at once:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Remove description for first field</span>
<span class="va">iris_schema</span><span class="op">$</span><span class="va">fields</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">description</span> <span class="op">&lt;-</span> <span class="cn">NULL</span>

<span class="co"># Set descriptions for all fields</span>
<span class="va">descriptions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
  <span class="st">"Sepal length in cm."</span>,
  <span class="st">"Sepal width in cm."</span>,
  <span class="st">"Pedal length in cm."</span>,
  <span class="st">"Pedal width in cm."</span>,
  <span class="st">"Iris species."</span>
<span class="op">)</span>
<span class="va">iris_schema</span><span class="op">$</span><span class="va">fields</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/imap.html" class="external-link">imap</a></span><span class="op">(</span>
  <span class="va">iris_schema</span><span class="op">$</span><span class="va">fields</span>,
  <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">.x</span>, description <span class="op">=</span> <span class="va">descriptions</span><span class="op">[</span><span class="va">.y</span><span class="op">]</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">iris_schema</span><span class="op">)</span>
<span class="co">#&gt; List of 1</span>
<span class="co">#&gt;  $ fields:List of 5</span>
<span class="co">#&gt;   ..$ :List of 3</span>
<span class="co">#&gt;   .. ..$ name       : chr "Sepal.Length"</span>
<span class="co">#&gt;   .. ..$ type       : chr "number"</span>
<span class="co">#&gt;   .. ..$ description: chr "Sepal length in cm."</span>
<span class="co">#&gt;   ..$ :List of 3</span>
<span class="co">#&gt;   .. ..$ name       : chr "Sepal.Width"</span>
<span class="co">#&gt;   .. ..$ type       : chr "number"</span>
<span class="co">#&gt;   .. ..$ description: chr "Sepal width in cm."</span>
<span class="co">#&gt;   ..$ :List of 3</span>
<span class="co">#&gt;   .. ..$ name       : chr "Petal.Length"</span>
<span class="co">#&gt;   .. ..$ type       : chr "number"</span>
<span class="co">#&gt;   .. ..$ description: chr "Pedal length in cm."</span>
<span class="co">#&gt;   ..$ :List of 3</span>
<span class="co">#&gt;   .. ..$ name       : chr "Petal.Width"</span>
<span class="co">#&gt;   .. ..$ type       : chr "number"</span>
<span class="co">#&gt;   .. ..$ description: chr "Pedal width in cm."</span>
<span class="co">#&gt;   ..$ :List of 4</span>
<span class="co">#&gt;   .. ..$ name       : chr "Species"</span>
<span class="co">#&gt;   .. ..$ type       : chr "string"</span>
<span class="co">#&gt;   .. ..$ constraints:List of 1</span>
<span class="co">#&gt;   .. .. ..$ enum: chr [1:3] "setosa" "versicolor" "virginica"</span>
<span class="co">#&gt;   .. ..$ description: chr "Iris species."</span></code></pre></div>
<p>Let’s add <code>iris</code> as a resource to your Data Package again, but this time with the customized schema. Note that you have to remove the originally added resource <code>iris</code> with <code><a href="../reference/remove_resource.html">remove_resource()</a></code> first, since Data Packages can only contain uniquely named resources:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_package</span> <span class="op">&lt;-</span>
  <span class="va">my_package</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/remove_resource.html">remove_resource</a></span><span class="op">(</span><span class="st">"iris"</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># Remove originally added resource</span>
  <span class="fu"><a href="../reference/add_resource.html">add_resource</a></span><span class="op">(</span>
    resource_name <span class="op">=</span> <span class="st">"iris"</span>,
    df <span class="op">=</span> <span class="va">iris</span>,
    schema <span class="op">=</span> <span class="va">iris_schema</span> <span class="co"># Your customized schema</span>
  <span class="op">)</span></code></pre></div>
<p>In the above steps you started a Data Package from scratch with <code><a href="../reference/create_package.html">create_package()</a></code>, but you use the same functionality to edit an existing Data Package read with <code><a href="../reference/read_package.html">read_package()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="write-a-data-package">Write a Data Package<a class="anchor" aria-label="anchor" href="#write-a-data-package"></a>
</h2>
<p>Now that you have created your Data Package, you can write it to a directory of your choice with <code><a href="../reference/write_package.html">write_package()</a></code>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/write_package.html">write_package</a></span><span class="op">(</span><span class="va">my_package</span>, <span class="st">"my_directory"</span><span class="op">)</span></code></pre></div>
<p>The directory will contain two files: the descriptor <code>datapackage.json</code> and a CSV file containing the data for the resource <code>iris</code>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="st">"my_directory"</span><span class="op">)</span>
<span class="co">#&gt; [1] "datapackage.json" "iris.csv"</span></code></pre></div>
<p>The frictionless pkg does not provide functionality to deposit your Data Package on a research repository such as <a href="https://zenodo.org" class="external-link">Zenodo</a>, but here are some tips:</p>
<ol style="list-style-type: decimal">
<li>Validate your Data Package before depositing. You can do this in Python with the <a href="https://github.com/frictionlessdata/frictionless-py" class="external-link">Frictionless Framework</a> using <code>frictionless validate datapackage.json</code>.</li>
<li>Zip the individual csv files (and update their paths in <code>datapackage.json</code>) to reduce size, not the entire Data Package. That way, users still have direct access to the <code>datapackage.json</code> file. See <a href="https://zenodo.org/record/5061303#files" class="external-link">this example</a>.</li>
<li>Only describe the technical aspects of your dataset in <code>datapackage.json</code> (fields, units, the dataset identifier in <code>id</code>). Authors, methodology, license, etc. are better described in the metadata fields the research repository provides.</li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://twitter.com/peterdesmet" class="external-link">Peter Desmet</a>, <a href="https://twitter.com/damianozingaro" class="external-link">Damiano Oldoni</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
